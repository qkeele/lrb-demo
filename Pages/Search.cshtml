@page
@model LrbDemo.Pages.SearchModel

<h1>AI Search</h1>

<form method="post">
    <input asp-for="UserQuery" style="width: 600px;" />
    <button type="submit" class="btn btn-primary btn-lg">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="me-2" viewBox="0 0 16 16">
        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
    </svg>
    Search
</button>
</form>

@if (!string.IsNullOrWhiteSpace(Model.OpenAiRawJson))
{
    <h2>OpenAI Raw Output</h2>
    <pre>@Model.OpenAiRawJson</pre>
}

@if (Model.Results?.Any() == true)
{
    <h2>Results</h2>

    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Measure</th>
                <th>Description</th>
                <th>Introducer</th>
                <th>Committees</th>
                <th>Committee Reports</th>
                <th>Status</th>
                <th>Votes</th>
                <th>HRS Sections</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var m in Model.Results)
        {
            <tr>
                <td>@m.MeasureNumber</td>
                <td>@m.Description</td>
                <td>@m.Introducer</td>
                <td>@m.CommitteeReferrals</td>
                <td>@m.CommitteeReportNumbers</td>
                <td>@m.CurrentStatus</td>
                <td>@m.RollCallVotes</td>
                <td>@m.HrsSectionsAffected</td>
            </tr>
        }
        </tbody>
    </table>
}

